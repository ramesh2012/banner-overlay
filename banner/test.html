<canvas id="canvas" width="320" height="240"></canvas>
<button id="btnShare">共有</button>

<script>

window.onload = () => {
  const canvas = document.getElementById("canvas");
  const context = canvas.getContext("2d");
  context.beginPath();
  context.rect(10, 10, 310, 230);
  context.fillStyle = "#0000FF";
  context.fill();
  context.closePath();
  
  document.getElementById("btnShare").onclick = () => {
    share();
  };
};

/**
 * 画像付きでWebページを共有する
 */
const share = () => {
  const canvas = document.getElementById("canvas");
  const dataURL = canvas.toDataURL("image/png");
  const blob = toBlob(dataURL);

  const imageFile = new File([blob], "image.png", {
    type: "image/png",
  });
  navigator.share({
    text: "共有テスト",
    url: "",
    files: [imageFile],
  }).then(() => {
    console.log("共有成功.");
  }).catch((error) => {
    console.log(error);
  });
};



</script>